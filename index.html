<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‹‡æ•¢çš„æˆé•¿å°è¶…äºº - å†’é™©ç‰ˆ</title>
    <style>
        /* --- CSS Reset & åŸºç¡€æ ·å¼ --- */
        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 0; background: #2c3e50; font-family: "Microsoft YaHei", sans-serif; overflow: hidden; }
        
        /* --- æ¸¸æˆä¸»å®¹å™¨ (Stage) --- */
        #game-stage {
            width: 100vw; height: 100vh;
            position: relative;
            background: #000;
            overflow: hidden;
        }

        /* --- é€šç”¨åœºæ™¯æ ·å¼ (Scene) --- */
        .scene {
            width: 100%; height: 100%;
            position: absolute; top: 0; left: 0;
            display: none; /* é»˜è®¤éšè—æ‰€æœ‰åœºæ™¯ */
            flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
        /* æ¿€æ´»çš„åœºæ™¯å¯è§ */
        .scene.active { display: flex; }

        /* --- 1. å¼€å§‹ç•Œé¢ --- */
        #scene-start { background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%); }
        .title { font-size: 2.5rem; color: #ff9f43; text-shadow: 2px 2px #333; margin-bottom: 20px; font-weight: bold; }
        .btn-start {
            padding: 15px 40px; font-size: 1.5rem;
            background: #ff6b6b; color: white; border: none; border-radius: 50px;
            box-shadow: 0 5px 15px rgba(255,107,107,0.4);
            cursor: pointer; animation: pulse 1.5s infinite;
        }

        /* --- 2. åœ°å›¾ç•Œé¢ --- */
        #scene-map { 
            background-color: #7bed9f; /* æš‚æ—¶ç”¨ç»¿è‰²ä»£æ›¿åœ°å›¾èƒŒæ™¯ */
            background-image: radial-gradient(#ffffff 20%, transparent 20%), radial-gradient(#ffffff 20%, transparent 20%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            display: none; /* è¿™æ˜¯ä¸€ä¸ªblockç±»å‹çš„æ˜¾ç¤ºï¼Œç¨åJSæ§åˆ¶ */
        }
        
        /* åœ°ç‚¹å›¾æ ‡ (Nodes) - ç»å¯¹å®šä½ */
        .map-node {
            position: absolute; width: 80px; height: 80px;
            background: white; border-radius: 50%;
            border: 4px solid #ff9f43;
            display: flex; justify-content: center; align-items: center;
            font-size: 0.8rem; font-weight: bold; cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        .map-node:active { transform: scale(0.9); }
        /* æ¨¡æ‹Ÿåæ ‡ï¼Œç¨åæˆ‘ä»¬è¦å¾®è°ƒ */
        #node-school { top: 20%; left: 30%; }
        #node-robot { top: 50%; right: 20%; }
        #node-sports { bottom: 20%; left: 20%; }

        /* --- UI å±‚ (HUD) --- */
        #hud-layer {
            position: absolute; top: 0; left: 0; width: 100%;
            padding: 15px; pointer-events: none; /* è®©ç‚¹å‡»ç©¿é€è¿‡å» */
            display: none; justify-content: space-between;
        }
        .courage-bar-container {
            width: 200px; height: 20px; background: rgba(0,0,0,0.5);
            border-radius: 10px; overflow: hidden; border: 2px solid white;
        }
        #courage-fill {
            width: 0%; height: 100%; background: #feca57; transition: width 0.5s;
        }

        /* --- åŠ¨ç”»å®šä¹‰ --- */
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <!-- æ¸¸æˆèˆå° -->
    <div id="game-stage">
        
        <!-- UI å±‚ (HUD) -->
        <div id="hud-layer">
            <div style="color: white; font-weight: bold; text-shadow: 1px 1px 2px black;">
                å‹‡æ°”å€¼: <span id="courage-text">0</span>/100
            </div>
            <div class="courage-bar-container">
                <div id="courage-fill"></div>
            </div>
        </div>

        <!-- åœºæ™¯ 1: å¼€å§‹ç•Œé¢ -->
        <div id="scene-start" class="scene active">
            <div class="title">å‹‡æ•¢çš„å°è¶…äºº</div>
            <div style="margin-bottom: 30px; font-size: 1.2rem; color: #555;">ç‚¹å‡»å¼€å¯æˆé•¿å†’é™©</div>
            <button class="btn-start" onclick="Game.start()">å¼€å§‹å†’é™©</button>
        </div>

        <!-- åœºæ™¯ 2: åœ°å›¾ç•Œé¢ -->
        <div id="scene-map" class="scene">
            <!-- è¿™é‡Œæ”¾ç½®ç‚¹å‡»ç‚¹ -->
            <div id="node-school" class="map-node" onclick="Game.openStory('school')">ğŸ« å­¦æ ¡</div>
            <div id="node-robot" class="map-node" onclick="Game.openStory('robot')">ğŸ¤– æœºå™¨äºº</div>
            <div id="node-sports" class="map-node" onclick="Game.openStory('sports')">âš½ è¿åŠ¨åœº</div>
        </div>

        <!-- åœºæ™¯ 3: æ•…äº‹å¼¹çª— (æš‚æ—¶éšè—) -->
        <!-- ç¨ååš -->

    </div>

    <script>
        /**
         * æ¨¡å—åŒ–è®¾è®¡ï¼šGame å¯¹è±¡
         * è¿™æ˜¯ä¸€ä¸ªå•ä¾‹æ¨¡å¼ (Singleton Pattern)
         */
        const Game = {
            // 1. æ•°æ®çŠ¶æ€ (State)
            data: {
                courage: 0,
                maxCourage: 100,
                unlocked: []
            },

            // 2. åˆå§‹åŒ–
            init: function() {
                console.log("æ¸¸æˆå¼•æ“å¯åŠ¨...");
            },

            // 3. å¼€å§‹æ¸¸æˆé€»è¾‘
            start: function() {
                // åˆ‡æ¢åˆ°åœ°å›¾åœºæ™¯
                document.getElementById('scene-start').classList.remove('active');
                document.getElementById('scene-map').classList.add('active');
                
                // æ˜¾ç¤º HUD
                document.getElementById('hud-layer').style.display = 'flex';
                
                // æ’­æ”¾èƒŒæ™¯éŸ³ä¹ (å¦‚æœæœ‰)
                // playBGM();
            },

            // 4. æ‰“å¼€æ•…äº‹ (æ ¸å¿ƒäº¤äº’)
            openStory: function(locationId) {
                alert("ä½ ç‚¹å‡»äº†åœ°ç‚¹ï¼š" + locationId + "\n(ä¸‹ä¸€æ­¥æˆ‘ä»¬å°†åœ¨è¿™é‡Œå¼¹å‡ºç²¾ç¾çš„å›¾æ–‡æ•…äº‹)");
                
                // æ¨¡æ‹Ÿå¢åŠ å‹‡æ°”å€¼
                this.addCourage(20);
            },

            // 5. å¢åŠ æ•°å€¼
            addCourage: function(amount) {
                this.data.courage += amount;
                if(this.data.courage > this.data.maxCourage) this.data.courage = this.data.maxCourage;
                
                // æ›´æ–° UI
                this.updateUI();
            },

            // 6. æ›´æ–° UI æ˜¾ç¤º
            updateUI: function() {
                document.getElementById('courage-text').innerText = this.data.courage;
                document.getElementById('courage-fill').style.width = this.data.courage + "%";
            }
        };

        // å¯åŠ¨æ¸¸æˆ
        Game.init();

    </script>
</body>
</html>